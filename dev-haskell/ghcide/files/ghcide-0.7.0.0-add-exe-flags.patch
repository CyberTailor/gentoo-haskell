diff -urN ghcide-0.7.0.0-orig/ghcide.cabal ghcide-0.7.0.0/ghcide.cabal
--- ghcide-0.7.0.0-orig/ghcide.cabal	2001-09-08 19:46:40.000000000 -0600
+++ ghcide-0.7.0.0/ghcide.cabal	2021-01-30 11:18:54.583979874 -0700
@@ -197,7 +197,13 @@
         Development.IDE.Types.Action
     ghc-options: -Wall -Wno-name-shadowing -Wincomplete-uni-patterns
 
+flag test-exe
+    description: Build the ghcide-test-preprocessor executable
+    default: False
+
 executable ghcide-test-preprocessor
+    if !flag(test-exe)
+        buildable: False
     default-language: Haskell2010
     hs-source-dirs: test/preprocessor
     ghc-options: -Wall -Wno-name-shadowing
@@ -239,9 +245,15 @@
         text,
         yaml
 
+flag executable
+    description: Build the ghcide executable
+    default: False
+
 executable ghcide
     if flag(ghc-lib)
       buildable: False
+    if !flag(executable)
+      buildable: False
     default-language:   Haskell2010
     hs-source-dirs:     exe
     ghc-options:
@@ -373,7 +385,13 @@
         TypeApplications
         ViewPatterns
 
+flag bench-exe
+    description: Build the ghcide-bench executable
+    default: False
+
 executable ghcide-bench
+    if !flag(bench-exe)
+        buildable: False
     default-language: Haskell2010
     build-tool-depends:
         ghcide:ghcide
